---
title: The AWS Ecosystem, IAM, and S3
layout: page
course: AWS Cloud Fundamentals
courselanding: /aws1/lessons/
session: 1
---

<div id="wrapper">
  <nav id="toc">
    <small><a style="font-style: italic" href="{{ site.url }}/aws1/lessons/" title="">< back</a></small>
    <ol>
      <li><a href="#LessonGoals">Goals</a></li>
      <li><a href="#intros">Introductions</a></li>
      <li><a href="#logistics">Logistics</a></li>
      <li><a href="#agenda">Agenda</a></li>
      <li><a href="#cloud">Cloud Computing</a></li>
      <li><a href="#overview">AWS Services</a></li>
      <li><a href="#free">Free Tier Services</a></li>
      <li><a href="#vocab">AWS Vocabulary</a></li>
      <li><a href="#iam">IAM</a></li>
      <li><a href="#s3overview">S3</a></li>
      <li><a href="#static">Static Sites</a></li>
      <li><a href="#cloudfront">CloudFront</a></li>
      <li><a href="#cleanup">Cleanup</a></li>
      <li><a href="#selfstudy">Self-Study Exercises</a></li>
    </ol>
  </nav>
  <div id="content-container">
    <section>
      <a name="LessonGoals"></a>
      <img class="section-image" src="{{ site.url }}/assets/images/goals.svg" alt="Target">
      <h2><a>Lesson Goals</a></h2>
      <p>During today's class, you will:</p>
      <ul>
        <li>Create an IAM user and differentiate between IAM groups, roles, and policies</li>
        <li>Upload objects to S3 buckets using both the console and AWS CLI</li>
        <li>Host a static website using S3</li>
        <li>Create a CloudFront distribution to reduce latency</li>
        <li>Explore the AWS SDKs for interacting with S3</li>
      </ul>
    </section>
    <hr />
    <section>
      <a name="intros"></a>
      <img class="section-image" src="{{ site.url }}/assets/images/introductions.svg" alt="Target image">
      <h2><a>Introductions</a></h2>
      <ul>
        <li>Name</li>
        <li>Why you're interested in learning about and using AWS services</li>
        <li>Any experience with AWS? If so, what?</li>
        <li>[?]</li>
      </ul>
    </section>
    <hr />
    <section>
      <a name="logistics"></a>
      <img class="section-image" src="{{ site.url }}/assets/images/expectations.svg" alt="Referee shirt image">
      <h2><a>Logistics and Expectations</a></h2>
      <ol>
        <li>This course will explore foundational concepts for a variety of AWS services. Because we don't have an unlimited amount of time, we have included links within the curriculum to related concepts beyond the scope of the class.</li>
        <li>Don't be intimidated by the fine-grain control that AWS gives you. When first starting out, stick with the defaults that AWS provides.</li>
        <li>The AWS Ecosystem is vast! It's ok to not know everything.</li>
        <li>Ask questions. If your question refers to something outside the scope of the class, we'll ask you to put the question in the parking lot.</li>
        <li>Play your part in creating a safe and welcoming learning environment for your classmates.</li>
        <li>We will use code in this course, but coding is not the focus of the course. For the code samples we use, we'll do a high-level walk through before integrating AWS services.</li>
        <li>This course is a hands-on approach to learning fundamental AWS services. The content of this course will provide a solid foundation for continuing to pursue either the Cloud Practitioner or Developer Associate <a target="blank" href="https://aws.amazon.com/certification/">AWS Certification Exam</a>.</li>
      </ol>
      <h4>Theory vs. Hands-On</h4>
      <p>During this course, we'll alternate between discussing theory/facts and actually diving in to see how things work. The theory and facts portions are relevant to the certification exams in addition to having the foundational knowledge to start building using AWS services.</p>
      <p>Red boxes, like the one below, indicate an exercise we'll all try together.</p>
      <div class="together">
        <h4>Together: Example</h4>
        <p>Instructions for example exercise.</p>
      </div>
      <p>Teal boxes, like the one below, indicate an exercise that you'll try independently or with a partner.</p>
      <div class="try-it">
        <h4>Try It: Example</h4>
        <p>Instructions for example exercise.</p>
      </div>
    </section>
    <hr />
    <section>
      <a name="agenda"></a>
      <img class="section-image" src="{{ site.url }}/assets/images/logistics.svg" alt="Agenda image">
      <h2><a>Today's Agenda</a></h2>
      <ul>
        <li>Intro to Cloud Computing</li>
        <li>Overview of AWS Services</li>
        <li>Overview of IAM Policies Users, Groups, and Roles</li>
        <li>S3 Overview and Example</li>
        <li>Static Sites on S3 and CloudFront</li>
        <li>AWS SDKs</li>
      </ul>
    </section>
    <hr />
    <section>
      <a name="cloud"></a>
      <img class="section-image" src="{{ site.url }}/assets/images/clouds.svg" alt="Cloud image">
      <h2><a>Intro to Cloud Computing</a></h2>
      <div class="things-to-note">
        <p></p>
        <h4>From <a target="blank" href="https://aws.amazon.com/what-is-cloud-computing/">AWS:</a></h4>
        <p>"Cloud computing is the on-demand delivery of compute power, database, storage, applications, and other IT resources via the internet with pay-as-you-go pricing."</p>
      </div>
      <p>You can think of this in the same way that you think of any metered bill that you pay (electricity, gas, water, etc.). In this way, an organization does not need to consider time or capacity when scaling their computing needs.</p>
      <p>AWS and other cloud providers such as Microsoft Azure, Google Cloud Platform, etc. own and service large data centers distributed across the world. In this way, an AWS customer can provision and gain access to resources almost instantly.</p>
      <p>Some of the benefits of AWS Cloud Computing include:</p>
      <ul>
        <li>Faster innovation</li>
        <li>Elasticity and scaling</li>
        <li>Lower latency</li>
        <li>Cost savings</li>
      </ul>
      <h4>Additional Resources</h4>
      <ul>
        <li><a href="https://aws.amazon.com/what-is-cloud-computing/" title="">AWS: What is Cloud Computing?</a></li>
        <li><a href="https://aws.amazon.com/types-of-cloud-computing/" title="">AWS: Types of Cloud Computing</a></li>
      </ul>
    </section>
    <hr />
    <section>
      <a name="overview"></a>
      <img class="section-image" src="{{ site.url }}/assets/images/awslogo.png" alt="AWS logo">
      <h2><a>Overview of AWS Services</a></h2>
      <p>As of 2019, Amazon Web Services is the market leader in cloud services with a 30% market share, followed my Microsoft Azure, Google Cloud, and Alibaba Cloud. AWS provides cloud-based solutions in a variety of areas. Take a look at the graphic below from <a href="https://aws.amazon.com/products/" target="blank" title="">AWS Products</a> page:</p>
      <img src="{{ site.url }}/assets/images/awsservices.png" alt="AWS Services">
      <div class="try-it">
        <h4>Try It: Service Scavenger Hunt</h4>
        <p>Use the <a target="blank" href="https://aws.amazon.com/products/" target="blank" title="">AWS Products</a> page to determine which AWS tools you could use for the following scenarios:</p>
        <ol>
          <li>I need to store large amounts of data at very low cost.</li>
          <li>I need to be able to protect my application from DDoS attacks.</li>
          <li>I need to create API endpoints that I can use for both my mobile app and the front end of my web app.</li>
          <li>I need to turn written text into realistic speech.</li>
          <li>I need to automate the deployment of my application whenever I push to GitHub.</li>
          <li>I need to deploy and manage my Rails or ExpressJS web application.</li>
          <li>I need to create a SQL database for my app to interact with.</li>
          <li>I need to test my React Native app on Android, iOS, and FireOS devices.</li>
        </ol>
      </div>
      <p>Over the course of this 12-hour AWS Fundamentals class, we'll use the following services:</p>
      <div class="flex-container">
        <div style="flex-basis: 100%">
          <b>Compute</b>
          <ul>
            <li>EC2</li>
            <li>Lambda</li>
            <li>Elastic Beanstalk</li>
          </ul>
        </div>
        <div style="flex-basis: 100%">
          <b>Database</b>
          <ul>
            <li>RDS</li>
            <li>DynamoDB</li>
          </ul>
        </div>
        <div style="flex-basis: 100%">
          <b>Network & Content Delivery</b>
          <ul>
            <li>CloudFront</li>
            <li>API Gateway</li>
          </ul>
        </div>
        <div style="flex-basis: 100%">
          <b>Developer Tools</b>
          <ul>
            <li>CloudFront</li>
            <li>API Gateway</li>
          </ul>
        </div>
        <div style="flex-basis: 100%">
          <b>Other</b>
          <ul>
            <li>S3</li>
            <li>Identity Access Management</li>
          </ul>
        </div>
      </div>
      <h4>Interacting with AWS</h4>
      <p>There are three ways to access AWS services:</p>
      <ol>
        <li><a target="blank" href="https://docs.aws.amazon.com/awsconsolehelpdocs/latest/gsg/getting-started.html" title="">AWS Management Console</a>: browser interface</li>
        <li><a target="blank" href="https://aws.amazon.com/cli/" title="">AWS CLI</a>: command line interface</li>
        <li><a target="blank" href="https://aws.amazon.com/tools/" title="">AWS SDKs</a>: code packages in a variety of languages</li>
      </ol>
      <p>Compare the console, SDK, and CLI interfaces for creating a DynamoDB table:</p>
      <div class="flex-container">
        <div class="inner-fcontainer border">
          <h4 class="bright">From the web console:</h4>
          <img src="{{ site.url }}/assets/images/dynamo_console.png" alt="Dynamo Console">
        </div>
        <div class="inner-fcontainer border">
          <h4 class="bright">From the CLI:</h4>
          <!-- <img src="{{ site.url }}/assets/images/dynamocli.png" alt="Dynamo CLI commands"> -->
          <small>(From AWS documentation)</small>
          <pre style="font-size: 8px; line-height: 0.6rem;">aws dynamodb create-table \
            --table-name MusicCollection \
            --attribute-definitions \
            AttributeName=Artist,AttributeType=S AttributeName=SongTitle,AttributeType=S \
            --key-schema AttributeName=Artist,KeyType=HASH AttributeName=SongTitle,KeyType=RANGE \
            --provisioned-throughput ReadCapacityUnits=1,WriteCapacityUnits=1
          </pre>
          <h4 class="bright">From the Ruby SDK:</h4>
          <small>(From AWS documentation)</small>
          <pre style="font-size: 8px; line-height: 0.6rem;">require 'aws-sdk'
            dynamodb = Aws::DynamoDB::Client.new(region: 'us-west-2')
            params = {
            table_name: 'Movies',
            key_schema: [
            {
              attribute_name: 'year',
              key_type: 'HASH'
            },
            {
              attribute_name: 'title',
              key_type: 'RANGE'
            }
            ],
            attribute_definitions: [
            {
              attribute_name: 'year',
              attribute_type: 'N'
            },
            {
              attribute_name: 'title',
              attribute_type: 'S'
            },
            ],
            provisioned_throughput: {
            read_capacity_units: 10,
            write_capacity_units: 10
          }
        }
        begin
        result = dynamodb.create_table(params)
        puts 'Created table. Status: ' +
        result.table_description.table_status;
        rescue  Aws::DynamoDB::Errors::ServiceError => error
        puts 'Unable to create table:'
        puts error.message
      end</pre>
    </div>
  </div>
  <p>Most of what we'll do in these sessions will involve working through the AWS web console. The web console provides clear context and explanations for the options available on each AWS service, whereas the CLI and SDKs are less transparent and slightly harder to navigate when first learning.</p> 
</section>
<hr />
<section>
  <a name="free"></a>
  <img class="section-image" src="{{ site.url }}/assets/images/user.svg" alt="User image">
  <h2><a>AWS Free Tier Account</a></h2>
  <p>When you initially sign up for AWS, you'll have access to many AWS services under the free tier for 12 months. Let's briefly glance at the <a target="blank" href="https://aws.amazon.com/free/?all-free-tier.sort-by=item.additionalFields.SortRank&all-free-tier.sort-order=asc" title="">free tier limits</a>.</p>
  <p>Many AWS services require you to use the default settings in order to stay within free tier limits.</p>
</section>
<hr />
<section>
  <a name="vocab"></a>
  <img class="section-image" src="{{ site.url }}/assets/images/vocab.svg" alt="AWS IAM logo">
  <h2><a>General AWS Vocabulary</a></h2>
  <p>Let's learn a few general AWS vocab words. All other section-specific vocabulary for the remainder of the course will be marked like <span class="vocab">this</span>.</p>
  <ul>
    <li><span class="vocab">Availability Zone:</span> An availability zone is a physical structure containing the computing resources necessary for AWS services. You can picture an availability zone as a giant warehouse filled with computing resources. Availability zones are designed for high availability and redundancy in order to continue working in the event of a disaster.</li>
    <li><span class="vocab">Region:</span> A region is a geographical area comprised of three or more availability zones. Within the region, the availability zones are physically separated from each other so that disasters don't impact all availability zones in a region. You can find the list of regions and their corresponding codes <a href="https://docs.aws.amazon.com/general/latest/gr/rande.html">here</a>.</li>
  </ul>
  <p>All regions operate fairly similarly; however, you may find some differences in pricing and service availability. In addition, you may choose a specific region for lower latency or regulatory compliance. For our exercises in this class, we'll be using the N. Virgina region (<code>us-east-1</code>) since that's where AWS tends to release most of its features first, and therefore has the largest number of services available.</p>
  <div class="together">
    <h4>Together: AWS Regions and Availability Zones</h4>
    <p>Let's check out the current map of regions and availability zones on the <a target="blank" href="https://aws.amazon.com/about-aws/global-infrastructure/" title="">AWS Global Infrastructure</a> page.</p>
  </div>
  
</section>
<hr />
<section>
  <a name="iam"></a>
  <img class="section-image" src="{{ site.url }}/assets/images/aws-iam-logo.svg" alt="AWS IAM logo">
  <h2><a>IAM: Identity Access Management</a></h2>
  <p>The AWS IAM console gives you a way to manage <b>who</b> or <b>what</b> can use your AWS resources.</p>
  <p><span class="vocab">IAM Users</span> can be used for either people or applications. User accounts can be granted <b>console</b> and/or <b>programmatic</b> access depending on what you'll need the account to do. If granted programmatic access, the account will have access tokens that can be used in code.</p>
  <p>AWS recommends that you <b>do not</b> use the root account for anything and delete the root access keys. In the setup video, you created an admin user. This is what AWS recommends for security purposes.</p>
  <p><span class="vocab">IAM Groups</span> are used to organize user accounts by function. For example, you may create a group called "developers" and grant that group access to EC2, S3 and Elastic Beanstalk. Your "database admin" group might have access to RDS, and your "data science" group would be able to access Redshift and Elastic MapReduce.</p>
  <p>In general, <span class="vocab">IAM Roles</span> are used when you need a specific AWS service to have access to another service. For example, if your Lambda function needs to upload a file to S3, you would assign a role containing those permissions to your Lambda function.</p>
  <p>An <span class="vocab">IAM policy</span> is a document that can be associated with a user, group, or role. IAM policies are written in JSON syntax and define permissions for AWS services.</p> 
  <p>Below is a diagram from the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_managed-vs-inline.html" title="">AWS IAM Policy documentation</a> that shows how users, groups, roles, and policies work together:</p>
  <img src="https://docs.aws.amazon.com/IAM/latest/UserGuide/images/policies-aws-managed-policies.diagram.png" alt="Users, groups, roles, and policies diagram">
  <h4>Policy Syntax</h4>
  <p>Here's an example of an AWS policy permitting all actions on all S3 resources:</p>
  <pre>{
    "Version": "2012-10-17",
    "Statement": [
    {
      "Sid": "Stmt1563910191687",
      "Action": "s3:*",
      "Effect": "Allow",
      "Resource": "*"
    }
    ]
  }</pre>
  <ul>
    <li><span class="vocab">Version</span>: The version of the AWS policy language. The newest version of this language is 2012-10-17.</li>
    <li><span class="vocab">Statement</span>: An array containing groupings for the following elements. A policy can contain more than one statement.</li>
    <li><span class="vocab">Sid</span>: This is an arbitrary name for your statement. You can either choose to keep the pre-generated Statement ID, or you can create your own name.</li>
    <li><span class="vocab">Action</span>: What actions should this user be able to take? Note: * indicates everything.</li>
    <li><span class="vocab">Effect</span>: Are we allowing or denying permissions?</li>
    <li><span class="vocab">Resource</span>: Which AWS service or entity does this apply to? AWS resources will always start with <code>arn:aws:</code> For example, the ARN for an S3 bucket might be <code>arn:aws:s3:::my-first-bucket</code>.</li>
  </ul>
  <p>Let's look at one more example:</p>
  <pre>{
    "Version": "2012-10-17",
    "Statement": [
    {
      "Sid": "Stmt1563911150715",
      "Action": [
      "s3:GetObject",
      "s3:PutObject"
      ],
      "Effect": "Allow",
      "Resource": "arn:aws:s3:::my-first-bucket"
    }
    ]
  }</pre>
  <p>AWS provides pre-defined policies for common use cases called AWS managed policies. We will be using AWS managed policies during this course.</p>
  <p>You can also create your own policy documents using the <a target="blank" href="https://awspolicygen.s3.amazonaws.com/policygen.html" title="">Policy Generator</a>. These are called customer managed policies.</p>
  <div class="try-it">
    <h4>Try It: IAM Policies</h4>
    <p>Open the two example policy links below.</p>
    <ol>
      <li><a target="blank" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_examples_s3_rw-bucket.html" title="">S3 Policy Example</a></li>
      <li><a target="blank" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_examples_dynamodb_specific-table.html" title="">DynamoDB Policy Example</a></li>
    </ol>
    <p><b>With a partner, discuss:</b> If we were to assign these policies to users, what would they be able to do?</p>
    <p>Done? Try using the <a target="blank" href="https://awspolicygen.s3.amazonaws.com/policygen.html" title="">Policy Generator</a> to create a policy that allows an IAM user to access all actions in Cloud9, AWS's online code editor.</p>
  </div>
  <br>
  <div class="together">
    <h4>Together: IAM Groups</h4>
    <p>Let's create an IAM group for admins and add a user to it.</p>
  </div>
  <h4>Additional Resources</h4>
  <ul>
    <li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction.html" title="">IAM Documentation</a></li>
    <li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html" title="">IAM Best Practices</a></li>
    <li><a href="https://aws.amazon.com/answers/account-management/aws-tagging-strategies/" title="">Tagging Resources in AWS</a></li>
  </ul>
</section>
<hr />
<section>
  <a name="s3overview"></a>
  <img class="section-image" src="{{ site.url }}/assets/images/s3.svg" alt="AWS S3 logo">
  <h2><a>S3 Overview</a></h2>
  <p>Released in 2006, AWS Simple Storage Service (S3) provides object-based cloud storage with virtually no capacity limit.</p>
  <h4>Storage Classes and Pricing</h4>
  <p>AWS S3 offers multiple types of storage, called <span class="vocab">storage classes</span>. These storage classes differ in terms of pricing, latency, availability, and durability.</p>
  <div class="try-it">
    <h4>Try It: Storage Classes</h4>
    <p>Open the <a target="blank" href="https://aws.amazon.com/s3/storage-classes/" title="">S3 Storage Classes</a> documentation from AWS.</p>
    <p>With a partner, discuss: What are the main differences between Standard, Standard One Zone Infrequent Access, and Glacier? Use both the individual descriptions and the performance chart near the bottom.</p>
    <p>Done? Look at the specifications for remaining three storage classes.</p>
  </div>
  <p><a target="blank" href="https://aws.amazon.com/s3/pricing/" title="">Pricing</a> for S3 is based on both storage and bandwidth (data transfer). AWS provides a <a target="blank" href="https://calculator.s3.amazonaws.com/index.html" title="">calculator</a> for estimating your total monthly cost based on parameters you enter.</p>
  <h4>Structure</h4>
  <p>S3 is organized using <span class="vocab">buckets</span> (think of these like folders) and <span class="vocab">objects</span> (files and their related metadata). An account is limited to 100 buckets by default, but you may request more through Amazon. Individual objects within the buckets can be between 1 byte to 5 terabytes.</p>
  <p>Bucket names must be unique across <b>all</b> buckets in the S3 namespace and can contain lowercase letters, numbers, and hyphens.</p>
  <p>Buckets can contain folders, but it's important to remember that a folder is just part of an object key name.</p>
  <h4>Consistency Models</h4>
  <p>A consistency model explains what data will be accessible after specific events happen. S3 provides <span class="vocab">read-after-write consistency</span> for new PUT requests, and <span class="vocab">eventual consistency</span> for DELETE and PUT requests of existing objects.</p>
  <h4>Security</h4>
  <p>By default, data stored in S3 is not encrypted <b>at rest</b>; however, you can choose to encrypt your S3 objects either client-side (encrypted before you send) or server-side (encrypted by AWS while stored).</p>
  <p>S3 supports <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/serv-side-encryption.html">three ways</a> to encrypt your data at rest:</p>
  <ol>
    <li><span class="vocab">Server-Side Encryption with Amazon S3-Managed Keys (SSE-S3)</span>: Keys are managed and rotated by S3. Data is encrypted using AES-256. Free.</li>
    <li><span class="vocab">Server-Side Encryption with AWS KMS-Managed Keys (SSE-KMS)</span>: KMS is a separate AWS service that can be used in conjunction with multiple services, S3 being one of them. There are additional charges for using KMS, but you will also get more granular control over specific keys and permissions in addition to an audit log of key usage.</li>
    <li><span class="vocab">Server-Side Encryption with Customer-Provided Keys (SSE-C)</span>: "Customer" refers to the AWS account holder. With this type of encryption, you create, manage, and rotate your own keys.</li>
  </ol>
  <p>If you choose to encrypt the objects in your bucket, AWS now recommends enabling default encryption at the bucket level instead of flagging each individual object for encryption on upload. Default encryption can be enabled from the "Properties" tab in the S3 bucket. When enabling default encryption on a bucket, the setting will only apply to newly uploaded objects. Existing objects in the bucket will not be encrypted.</p>
  <h4>Versioning</h4>
  <p>S3 supports object versioning where every version of an object is stored. If you choose to delete an object, a "delete marker" will be placed in the version history, but that object will not actually be deleted. Versioning itself doesn't cost anything extra; however, since you will be storing more data, enabling versioning could end up costing more due to storage costs.</p>
  <h4>Bucket Access</h4>
  <p>Bucket access on S3 can be slightly confusing because of the multiple ways to grant access.</p>
  <ul>
    <li><b>Block public access</b>: When creating a new bucket, public access options are blocked by default. In the management console, you will have the opportunity to uncheck this box. Note: Unchecking this box does <b>not</b> mean that your bucket it public. It only means that your bucket <b>can</b> be public if you use either a bucket policy or an Access Control List (ACL).</li>
    <li><b>Bucket policies</b>: Bucket policies are similar to IAM policies in that they grant permissions. However, while an IAM policy is associated with a specific user, role, or group and can contain permission statements about multiple AWS services (such as S3, EC2, etc.), a bucket policy grants permissions only on a specific S3 bucket.</li>
    <li><b>Access Control Lists</b>: ACLs for S3 are considered legacy and AWS does not recommend using them anymore for most purposes. However, they are still supported. You can read more <a href="https://aws.amazon.com/blogs/security/iam-policies-and-bucket-policies-and-acls-oh-my-controlling-access-to-s3-resources/">here</a>.</li>
  </ul>
  <p>In general, a good rule of thumb is to use an IAM policy if you're trying to answer the question "What is this user allowed to do in AWS?" and a bucket policy if you're asking "Who should be able to access this bucket?"</p>
  <h4>Integration with other AWS Services</h4>
  <p>S3 can be used in conjunction with many other AWS services such as Athena, Lambda, Simple Notification Service, CloudWatch logs, CloudFront, and many more.</p>
  <div class="together">
    <h4>Together: S3 Buckets and Objects</h4>
    <p>Let's head over to the AWS console where we'll walk through creating a bucket, deciphering permissions, and uploading an image to a bucket. We'll make this image publicly accessible from its URL.</p>
  </div>
  <h4>Additional Resources</h4>
  <ul>
    <li><a href="https://aws.amazon.com/s3/storage-classes/" title="">S3 Storage Classes</a></li>
    <li><a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/ObjectVersioning.html">S3 Object Versioning</a></li>
    <li><a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/serv-side-encryption.html" title="">Server-Side Encryption with AWS</a></li>
  </ul>
</section>
<hr />
<section>
  <a name="static"></a>
  <img class="section-image" src="{{ site.url }}/assets/images/website.svg" alt="Image of blank browser">
  <h2><a>Static Sites on S3</a></h2>
  <p>S3 is a great tool for hosting static sites (including frontend only projects). In this section, we'll deploy a very simple website with an html file, css file, js file, and an image.</p>
  <p>For this section, you'll need to download and unzip the <a href="https://secondshifts3files.s3.us-east-2.amazonaws.com/secondshiftexample.zip" title="">project files</a>.</p>
  <div class="together">
    <h4>Together: Hosting a Static Site on S3</h4>
    <ol>
      <li>Create a bucket. <small><i>Note: While we will not be buying a domain name for our static site in this class, it's important to note that if you want to do that, your bucket name <b>must</b> match the name of the domain. (Example: myfirstcoolawswebsite.com)</i></small></li>
      <li>Keep all of the default settings in "Configure options."</li>
      <li><b>Uncheck</b> the "Block all public access" checkbox.</li>
      <li>Click "Create Bucket".</li>
      <li>Upload the files that you downloaded. There should be index.html, error.html, style.css, app.js, and turing_logo.png.</li>
      <li>Do not change any permission settings in the upload dialog box. We'll do this with a bucket policy.</li>
      <li>Once the files are uploaded, click on the "Properties" tab.</li>
      <li>In the Static Website Hosting box, select "Use this bucket to host a website" and enter index.html and error.html in the first two boxes.</li>
      <li>If you try to access your website right now, you'll see a "403 Forbidden" because we haven't specified that our objects should be public. Click on the "Permissions" tab and select "Bucket Policy".</li>
      <li>Use the policy generator to create an S3 policy that allows all principals (*) the ability to GetObject from the bucket. You'll need to click back over to S3 to find your bucket's ARN. It should look something like <i>arn:aws:s3:::bucketname</i>. Make sure to add <b>/*</b> on the end so that it's referring to all objects within the bucket, not the bucket itself.</li>
      <li>Generate the policy, then copy that policy and paste it into the Bucket Policy editor back in S3.</li>
      <li>Save it, and refresh your page.</li>
    </ol>
  </div>
  <div class="together">
    <h4>Cross Origin Resource Sharing</h4>
    <p>Let's say you want to keep all of your images in a separate bucket but be able to access them programatically with JavaScript. In order to do this, we'll need to enable CORS on the bucket that contains our image. </p>
    <ol>
      <li>In your text editor, open up the <code>app.js</code> file we downloaded earlier and uncomment the lines near the bottom.</li>
      <li>In the fetch call, insert the URL for the S3 image you uploaded in the previous section.</li>
      <li>Re-upload just the app.js file to your bucket.</li>
      <li>Open up your static site in an incognito tab with the developer tools console open.</li>
      <li>Try clicking the "add image" button.</li>
      <li>Back in your original images bucket, click on the "Permissions" tab and select CORS Configuration.</li>
      <li>Paste the following <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/cors.html">CORS configuration</a> into the editor and click save. You can also change the * to the URL of your static site to limit cross-origin requests just to your site.</li>
      <pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/"&gt;
  &lt;CORSRule&gt;
    &lt;AllowedOrigin&gt;*&lt;/AllowedOrigin&gt;
    &lt;AllowedMethod&gt;GET&lt;/AllowedMethod&gt;
    &lt;AllowedHeader&gt;*&lt;/AllowedHeader&gt;
  &lt;/CORSRule&gt;
&lt;/CORSConfiguration&gt;</pre>
      <li>Close and re-open your incognito tab and try the "add image" button.</li>
    </ol>
  </div>
</section>
<hr />
<section>
  <a name="cloudfront"></a>
  <img class="section-image" src="{{ site.url }}/assets/images/cloudfront.svg" alt="AWS CloudFront logo">
  <h2><a>CloudFront</a></h2>
  <p><span class="vocab">CloudFront</span> is AWS's content delivery network that exists to decrease latency when serving content to your users. CloudFront combines caching of static content (such as images, CSS, JS, and images) at <a href="">edge locations</a> with the accelerated speed and stability of the <a href="https://aws.amazon.com/about-aws/global-infrastructure/global_network/">AWS's Global Network</a> (a private IP network) for dynamic content to improve performance and delivery for end users.</p>
  <p>To contrast this with a more traditional approach: in the past, you would have your content stored in one location somewhere in the world. No matter where your users were located, they would have to request the content from that one server. Users located farther away from the server might experience longer delivery times.</p>
  <p>AWS <span class="vocab">Edge Location</span>s, or "Points of Presence," are a collection of almost 200 data centers throughout the world. Below is AWS's official map of Edge Locations:</p>
  <img src="{{site.url}}/assets/images/edge_location_map.png" alt="Map of AWS edge locations">
  <p>When a user requests content that is backed by CloudFront, the request is routed to the user's nearest edge location. If the content is already cached in that edge location from a previous request by another user, the response is sent back, decreasing the latency had the user requested directly from the origin. If the content has not been cached, the request is fowarded through AWS's backbone network to the origin (this could be an S3 bucket or a server). When the response is sent back, the data is cached at the edge location for either 24 hour whatever is specified by the customized time to live (TTL) response header. This process also reduces the load directly hitting the origin.</p>
  <p>When the TTL has passed, CloudFront forwards the request to the origin, and the origin responds with either a 304 (not modified, in which case CloudFront sends back the cached content), or the origin sends back a 200 status code with the latest version of the content.</p>
  <div class="together flex-container">
    <div class="inner-fcontainer">
      <h4>Together: CloudFront Request/Response</h4>
      <p>The AWS CloudFront diagram to the right shows the process of a user requesting content that is served through CloudFront. Let's walk through the possible paths.</p>
    </div>
    <div class="inner-fcontainer">
      <img src="{{site.url}}/assets/images/cloudfront_example.png" alt="AWS CloudFront Example diagram">
    </div>
  </div>
  <h4>CloudFront Distributions vs. Cross Region Replication</h4>
  <p>AWS S3 also supports <span class="vocab"><a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/crr.html">Cross Region Replication</a></span> (CRR), the purpose of which is sometimes confused with CloudFront. [FINISH, - for latency, disaster backup, compliance]</p>
  <h4>Creating a CloudFront Distribution</h4>
  <p>In order to take advantage of edge locations and AWS's backbone network, we need to create a <span class="vocab">CloudFront Distribution</span> which you use to declare the origin of the content and configure settings for how you want the content distributed.</p>
  <div class="together">
    <h4>Together: Creating a CloudFront Distribution</h4>
    <p>We'll create a distribution for our static site following these steps:</p>
    <ol>
      <li>Open CloudFront from the AWS services panel.</li>
      <li>Click "Create Distribution" and select Web.</li>
      <li>Choose the url of your S3 bucket for the Origin Domain Name.</li>
      <li>Check "yes" for Restrict Bucket Access.</li>
      <li>Select "Create a New Identity".</li>
      <li>Allow CloudFront to read from the bucket by selecting "Yes, Update Bucket Policy".</li>
      <li>We will leave the rest of the settings on the defaults.</li>
      <li>At the bottom, click "Create Distribution". This process can take between 10-60 minutes.</li>
    </ol>
  </div>
  <h4>Additional Resources</h4>
  <ul>
    <li><a href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Introduction.html">AWS CloudFront Docs</a></li>
    <li><a href="https://aws.amazon.com/blogs/aws/amazon-cloudfront-support-for-dynamic-content/">CloudFront Support for Dynamic Content</a></li>
    <li><a href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Invalidation.html#Invalidation_Requests">Invalidating Files in a CloudFront Distribution</a></li>
  </ul>
</section>
<hr />
<section>
  <a name="cleanup"></a>
  <img class="section-image" src="{{ site.url }}/assets/images/cleaning.svg" alt="Mop and bucket">
  <h2><a>Cleanup</a></h2>
  <p>The AWS free tier gives you access to many resources for free, but it's important to remember to tear down anything you don't plan on using further in order to avoid possible charges. Here's what you'll need to do in order to delete all of the resources we used today:</p>
  <ol>
    <li>Go to your CloudFront console and disable your distribution. This process will take several minutes.</li>
    <li>On the left-hand panel of your CloudFront console, click "Origin Access Identities" and delete the CloudFront identity that we created to give CF permission to access our S3 bucket.</li>
    <li>Go to your S3 Management Console and delete both of your buckets.</li>
    <li>IAM doesn't cost anything (even after your 12-month trial expires), so there's no need to delete any user accounts or groups there.</li>
  </ol>
</section>
<hr />
<section>
  <a name="selfstudy"></a>
  <img class="section-image" src="{{ site.url }}/assets/images/code.png" alt="Code in text editor">
  <h2><a>Recommended Self-Study: S3 Through AWS SDKs</a></h2>
  <p>AWS provides <a href="https://aws.amazon.com/tools/" title="">Software Development Kits</a> (SDKs) for many languages, including JavaScript, Ruby, Go, Python, etc. Though coding is not the focus of this course, we recommend taking some time to interact with the AWS services programmatically through one or more of the SDKs. The exercises below will get you started with some of the basic S3 functionality.</p>
  <p>Each of the SDKs uses the credentials that you set when you configured your AWS CLI. Therefore, you do not need to use environment variables (although you may do that if you choose to).</p>
  <h4>Exercises</h4>
  <ul>
    <li><a href="{{ site.url }}/aws1/lessons/1_basic_ruby_exercises.html" title="">Basic Ruby S3 Exercises</a></li>
    <li><a href="{{ site.url }}/aws1/lessons/1_basic_js_exercises.html" title="">Basic JavaScript S3 Exercises</a></li>
  </ul>
</section>
<hr />
</div>
</div>
<script
src="https://code.jquery.com/jquery-3.2.1.min.js"
integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
crossorigin="anonymous"></script>
